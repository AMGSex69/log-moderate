# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Session Timeout –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—à–∏–±–∫–∏ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "Session timeout".

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **–£–±—Ä–∞–Ω—ã –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã** –∏–∑ `hooks/use-auth.ts`:
   - –£–¥–∞–ª–µ–Ω 5-—Å–µ–∫—É–Ω–¥–Ω—ã–π —Ç–∞–π–º–∞—É—Ç –¥–ª—è `getSession()`
   - –£–¥–∞–ª–µ–Ω 10-—Å–µ–∫—É–Ω–¥–Ω—ã–π —Ç–∞–π–º–∞—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –¢–µ–ø–µ—Ä—å –∂–¥–µ–º –æ—Ç–≤–µ—Ç–∞ Supabase —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ

2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**:
   - –û—à–∏–±–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
   - Timeout –æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω AuthGuard**:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
   - –õ—É—á—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

#### –í `hooks/use-auth.ts`:
```typescript
// –ë–´–õ–û (–ø—Ä–æ–±–ª–µ–º–∞):
const sessionPromise = supabase.auth.getSession()
const timeoutPromise = new Promise((_, reject) => 
  setTimeout(() => reject(new Error("Session timeout")), 5000)
)
const session = await Promise.race([sessionPromise, timeoutPromise])

// –°–¢–ê–õ–û (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ):
const { data: { session }, error } = await supabase.auth.getSession()
```

#### –í `components/auth/auth-guard.tsx`:
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –æ—à–∏–±–æ–∫
useEffect(() => {
  if (error) {
    const timer = setTimeout(() => setShowError(true), 3000)
    return () => clearTimeout(timer)
  }
}, [error])
```

## üîÑ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –§–∞–π–ª—ã —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ñ–∞–π–ª—ã —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–æ—Å—Ç–æ:
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é:
1. –û–±–Ω–æ–≤–∏—Ç–µ `hooks/use-auth.ts` - —É–±—Ä–∞—Ç–∏—Ç–µ –≤—Å–µ —Ç–∞–π–º–∞—É—Ç—ã
2. –û–±–Ω–æ–≤–∏—Ç–µ `components/auth/auth-guard.tsx` - –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É –æ—à–∏–±–æ–∫
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- ‚úÖ –ù–µ—Ç –ª–æ–∂–Ω—ã—Ö "Session timeout" –æ—à–∏–±–æ–∫  
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—à—É
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è:

1. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞**:
   ```javascript
   localStorage.clear()
   sessionStorage.clear()
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å** –Ω–∞ –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**:
   - URL –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
   - –ö–ª—é—á–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã
   - –°–µ—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç

4. **–ñ–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞**: `Ctrl+Shift+R` (Windows) –∏–ª–∏ `Cmd+Shift+R` (Mac)

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: ~2 –º–∏–Ω—É—Ç—ã 