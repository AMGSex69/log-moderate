# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–ë–†–ê–¢–ù–û–ô –§–ê–ù–¢–û–ú–ù–û–°–¢–ò - –ê–ù–ù–ê –ò –ê–†–¢–Å–ú

## üö® –ü–†–û–ë–õ–ï–ú–ê
**–û–±—Ä–∞—Ç–Ω–∞—è —Ñ–∞–Ω—Ç–æ–º–Ω–æ—Å—Ç—å** - —ç—Ç–æ –∫–æ–≥–¥–∞:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—Å—Ç—å –≤ `user_profiles` (–ø—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–ª—Å—è)
- –ù–æ –ù–ï–¢ –∑–∞–ø–∏—Å–∏ –≤ `auth.users` (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –æ—à–∏–±–∫–∞ 422 "User already registered"

## üë• –ü–û–°–¢–†–ê–î–ê–í–®–ò–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò
- **–ê—Ä—Ç—ë–º –£—Å—Ç–∏–Ω–æ–≤** - ustinov.artemy@yandex.ru
- **–ê–Ω–Ω–∞ –ö–æ—Ä–∞–±–µ–ª—å–Ω–∏–∫–æ–≤–∞** - anuitakor@yandex.ru (—Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—ã—Ç–∞–ª–∞—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è)

## üîß –†–ï–®–ï–ù–ò–ï

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```bash
# –í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
\i fix-reverse-phantom-users.sql
```

### –®–∞–≥ 2: –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç
1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ—Ç** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
2. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç** –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–µ—Ç–∞–ª—è–º–∏
3. **–£–¥–∞–ª—è–µ—Ç** –ø—Ä–æ—Ñ–∏–ª–∏ –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –≤ auth.users
4. **–û—á–∏—â–∞–µ—Ç** —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ª–æ–≥–∏, —Å–µ—Å—Å–∏–∏)
5. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –¥–∞—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –®–∞–≥ 3: –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
–ü–æ–ø—Ä–æ—Å–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞** (Ctrl+Shift+Del)
2. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∑–∞–Ω–æ–≤–æ**
3. **–°–æ–æ–±—â–∏—Ç—å** –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –ê–Ω–Ω—ã –∏ –ê—Ä—Ç—ë–º–∞ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ –û–Ω–∏ —Å–º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ
- ‚úÖ –ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö

## üìä –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –°–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `auth.users`
- –°–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª–µ–π –≤ `user_profiles`
- –°–∫–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–∫–æ–ª—å–∫–æ –æ–±—ã—á–Ω—ã—Ö —Ñ–∞–Ω—Ç–æ–º–æ–≤ (auth –±–µ–∑ –ø—Ä–æ—Ñ–∏–ª–µ–π)
- –°–∫–æ–ª—å–∫–æ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Ñ–∞–Ω—Ç–æ–º–æ–≤ (–ø—Ä–æ—Ñ–∏–ª–∏ –±–µ–∑ auth)

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - —É–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª–∏ –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
2. **–û–±—Ä–∞—Ç–∏–º–æ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
3. **–¶–µ–ª–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ email'–∞–º–∏
4. **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ** - –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –¥–æ –∏ –ø–æ—Å–ª–µ

## üöÄ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –ø—Ä–æ—Ñ–∏–ª–∏
2. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∏—Å–∏ –≤ `auth.users` –≤—Ä—É—á–Ω—É—é
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `fix-phantom-users-422.sql` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
- –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ ‚úÖ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Ñ–∞–Ω—Ç–æ–º—ã ‚ö†Ô∏è - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
- –ï—Å–ª–∏ –Ω–æ–≤—ã–µ –æ—à–∏–±–∫–∏ üö® - —Å–æ–æ–±—â–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

## üîÑ –ú–û–ù–ò–¢–û–†–ò–ù–ì

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:
```sql
-- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
SELECT 
    COUNT(*) as auth_users FROM auth.users;
SELECT 
    COUNT(*) as user_profiles FROM public.user_profiles;
SELECT 
    COUNT(*) as synchronized 
FROM auth.users au 
INNER JOIN public.user_profiles up ON au.id = up.id;
``` 