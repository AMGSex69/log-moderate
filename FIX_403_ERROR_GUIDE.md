# üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 403

## –ü—Ä–æ–±–ª–µ–º–∞
- –û—à–∏–±–∫–∞ 403 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `Failed to load resource: the server responded with a status of 403`
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ `user_profiles`

## –ü—Ä–∏—á–∏–Ω–∞
RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.

## –†–µ—à–µ–Ω–∏–µ

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç: https://supabase.com/dashboard
- –ó–∞–π–¥–∏—Ç–µ –≤ **SQL Editor**

### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `fix-user-profiles-403.sql`:

```sql
-- –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 403 –û–®–ò–ë–ö–ò –î–õ–Ø USER_PROFILES
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤ Supabase SQL Editor

-- 1. –í–†–ï–ú–ï–ù–ù–û –£–î–ê–õ–Ø–ï–ú –í–°–ï –û–ì–†–ê–ù–ò–ß–ò–¢–ï–õ–¨–ù–´–ï –ü–û–õ–ò–¢–ò–ö–ò
DROP POLICY IF EXISTS "Users can view profiles from same office" ON public.user_profiles;
DROP POLICY IF EXISTS "user_profiles_select_policy" ON public.user_profiles;
DROP POLICY IF EXISTS "Users can view basic profile info" ON public.user_profiles;

-- 2. –°–û–ó–î–ê–ï–ú –ü–†–û–°–¢–£–Æ –û–¢–ö–†–´–¢–£–Æ –ü–û–õ–ò–¢–ò–ö–£ –î–õ–Ø –ê–£–¢–ï–ù–¢–ò–§–ò–¶–ò–†–û–í–ê–ù–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô
CREATE POLICY "authenticated_users_can_view_profiles" ON public.user_profiles
    FOR SELECT TO authenticated
    USING (true);

-- 3. –ü–†–û–í–ï–†–Ø–ï–ú, –ß–¢–û RLS –í–ö–õ–Æ–ß–ï–ù
ALTER TABLE public.user_profiles ENABLE ROW LEVEL SECURITY;

-- 4. –ê–ù–ê–õ–û–ì–ò–ß–ù–û –î–õ–Ø EMPLOYEES
DROP POLICY IF EXISTS "Users can view employees from same office" ON public.employees;
DROP POLICY IF EXISTS "employees_select_policy" ON public.employees;
DROP POLICY IF EXISTS "Users can view employee info" ON public.employees;

CREATE POLICY "authenticated_users_can_view_employees" ON public.employees
    FOR SELECT TO authenticated
    USING (true);

ALTER TABLE public.employees ENABLE ROW LEVEL SECURITY;
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
3. –û—à–∏–±–∫–∞ 403 –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 403 –≤ Network tab
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç
- –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–∫–ª—é—á–∞–µ—Ç RLS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å–µ–º –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤–∏–¥–µ—Ç—å –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫–æ–ª–ª–µ–≥

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ Email –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è –∏–ª–∏ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω
- ‚úÖ RLS –æ—Å—Ç–∞–µ—Ç—Å—è –≤–∫–ª—é—á–µ–Ω–Ω—ã–º
- ‚úÖ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∏–ª–∞—Å—å
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –≤–æ—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ —Ä–µ–∂–∏–º–µ
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É

---
*–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: Task Logger Support System* 